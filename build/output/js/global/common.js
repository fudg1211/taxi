define(["./configs","./storage","./hack"],function(){var e={}.toString,f=window.$;return window.com=common={isFunction:function(b){return e.call(b)=="[object Function]"},isString:function(b){return e.call(b)=="[object String]"},isArray:function(b){return e.call(b)=="[object Array]"},isObject:function(b){return e.call(b)=="[object Object]"},ua:window.navigator.userAgent,getRender:function(b,c){return(new EJS({url:b})).render({md:c})},dialog:function(b){if(!b.content){var c=b.url||"tpl/dialog";delete b.url;
b.content=this.getRender(c,b)}return dialog(b)},alert:function(b){b||(b={});if(!b.content)b.url=b.url||"tpl/alert";b.className="alertDialog";return this.dialog(b)},showLoading:function(){this.dialog({url:"tpl/loading",className:"loadingDialog"})},removeLoading:function(){f(".loadingDialog").remove()},ajax:function(b){b.url&&(b.url+=/^[^\?]*\?/.test(b.url)?"&mdNmk="+Math.random():"?mdNmk="+Math.random());var c={type:"GET",url:this.host,data:"",dataType:"json",success:function(){},error:function(){},
complete:function(){}};this.mix(c,b);c.success=function(c){b.success(c)};f.ajax(c)},mix:function(b,c){for(var d in c)b[d]=c[d]},clon:function(b){var c={},d=this;d.isArray(b)&&(c=[]);(function(b,c){if(d.isObject(b))for(k in b)b.hasOwnProperty(k)&&(d.isObject(b[k])?(c[k]={},arguments.callee(b[k],c[k])):d.isArray(b[k])?(c[k]=[],arguments.callee(b[k],c[k])):c[k]=b[k]);else if(d.isArray(b))for(k in b)d.isObject(b[k])?(c[k]={},arguments.callee(b[k],c[k])):d.isArray(b[k])?(c[k]=[],arguments.callee(b[k],
c[k])):c[k]=b[k]})(b,c);return c},gather:{},query:function(b,c){if(!b)return!1;this._queryArray||(this._queryArray=[]);if(this._queryArray.length)return this._queryArray[b];else{var c=c||window.location.href,c=c.replace(/#[^&]*$/,""),d=c.match(/\?(.+)/);if(d&&d[1]){d=d[1].split("&");for(a in d){var e=d[a].split("=");this._queryArray[e[0]]=e[1]}return this._queryArray[b]}else return""}}}});
