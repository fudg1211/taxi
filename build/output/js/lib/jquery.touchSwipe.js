(function(l){typeof define==="function"&&define.amd&&define.amd.jQuery?define(["jquery"],l):l(jQuery)})(function(l){function Z(e){if(e&&e.allowPageScroll===void 0&&(e.swipe!==void 0||e.swipeStatus!==void 0))e.allowPageScroll=$;if(e.click!==void 0&&e.tap===void 0)e.tap=e.click;e||(e={});e=l.extend({},l.fn.swipe.defaults,e);return this.each(function(){var a=l(this),k=a.data(A);k||(k=new aa(this,e),a.data(A,k))})}function aa(e,a){function B(b){if(c.data(A+"_intouch")!==!0&&!(l(b.target).closest(a.excludedElements,
c).length>0)){var d=b.originalEvent?b.originalEvent:b,J,i=p?d.touches[0]:d;g=ra;p?h=d.touches.length:b.preventDefault();m=0;u=n=null;w=x=j=0;r=1;v=0717224408;f=Z();P=aa();Q=K=0;if(!p||h===a.fingers||a.fingers===L||M()){if(ba(0,i),R=y(),h==2&&(ba(1,d.touches[1]),x=w=ca(f[0].start,f[1].start)),a.swipeStatus||a.pinchStatus)J=s(d,g)}else J=!1;if(J===!1)return g=o,s(d,g),J;else a.hold&&(da=setTimeout(l.proxy(function(){c.trigger("hold",[d.target]);a.hold&&(J=a.hold.call(c,d,d.target))},this),a.longTapThreshold)),
S(!0);return null}}function ea(b){var d,c,i,e=b.originalEvent?b.originalEvent:b;if(!(g===k||g===o||sa())){var B,t=ta(p?e.touches[0]:e);N=y();if(p)h=e.touches.length;a.hold&&clearTimeout(da);g=C;h==2&&(x==0?(ba(1,e.touches[1]),x=w=ca(f[0].start,f[1].start)):(ta(e.touches[1]),w=ca(f[0].end,f[1].end),u=r<1?fa:ga),r=(w/x*1).toFixed(2),v=Math.abs(x-w));if(h===a.fingers||a.fingers===L||!p||M()){d=t.start;c=t.end;d=Math.atan2(c.y-d.y,d.x-c.x);d=Math.round(d*180/Math.PI);d<0&&(d=360-Math.abs(d));d=n=d<=45&&
d>=0?z:d<=360&&d>=315?z:d>=135&&d<=225?D:d>45&&d<135?E:F;if(a.allowPageScroll===$||M())b.preventDefault();else switch(c=a.allowPageScroll===ua,d){case z:(a.swipeLeft&&c||!c&&a.allowPageScroll!=ha)&&b.preventDefault();break;case D:(a.swipeRight&&c||!c&&a.allowPageScroll!=ha)&&b.preventDefault();break;case F:(a.swipeUp&&c||!c&&a.allowPageScroll!=ia)&&b.preventDefault();break;case E:(a.swipeDown&&c||!c&&a.allowPageScroll!=ia)&&b.preventDefault()}m=Math.round(Math.sqrt(Math.pow(t.end.x-t.start.x,2)+Math.pow(t.end.y-
t.start.y,2)));j=N-R;b=n;d=m;d=Math.max(d,va(b));P[b].distance=d;if(a.swipeStatus||a.pinchStatus)B=s(e,g);if(!a.triggerOnTouchEnd||a.triggerOnTouchLeave){b=!0;if(a.triggerOnTouchLeave){i=l(this);var q=i.offset();b=q.left;d=q.left+i.outerWidth();c=q.top;i=q.top+i.outerHeight();b=t.end.x>b&&t.end.x<d&&t.end.y>c&&t.end.y<i}!a.triggerOnTouchEnd&&b?g=ja(C):a.triggerOnTouchLeave&&!b&&(g=ja(k));(g==o||g==k)&&s(e,g)}}else g=o,s(e,g);B===!1&&(g=o,s(e,g))}}function ka(b){var d=b.originalEvent;if(p&&d.touches.length>
0)return K=y(),Q=event.touches.length+1,!0;sa()&&(h=Q);N=y();j=N-R;la()||!ma()?(g=o,s(d,g)):a.triggerOnTouchEnd||a.triggerOnTouchEnd==!1&&g===C?(b.preventDefault(),g=k,s(d,g)):!a.triggerOnTouchEnd&&a.tap?(g=k,G(d,g,na)):g===C&&(g=o,s(d,g));S(!1);return null}function H(){w=x=R=N=h=0;r=1;Q=K=0;S(!1)}function oa(b){b=b.originalEvent;a.triggerOnTouchLeave&&(g=ja(k),s(b,g))}function wa(){c.unbind(T,B);c.unbind(U,H);c.unbind(pa,ea);c.unbind(qa,ka);I&&c.unbind(I,oa);S(!1)}function ja(b){var d=b,c=a.maxTimeThreshold?
j>=a.maxTimeThreshold?!1:!0:!0,f=ma(),e=la();!c||e?d=o:f&&b==C&&(!a.triggerOnTouchEnd||a.triggerOnTouchLeave)?d=k:!f&&b==k&&a.triggerOnTouchLeave&&(d=o);return d}function s(b,d){var c=void 0;if(xa()&&ya()||ya())c=G(b,d,za);else if((Aa()&&M()||M())&&c!==!1)c=G(b,d,Ba);Ca()&&a.doubleTap&&c!==!1?c=G(b,d,Da):j>a.longTapThreshold&&m<Fa&&a.longTap&&c!==!1?c=G(b,d,Ea):(h===1||!p)&&(isNaN(m)||m<a.threshold)&&a.tap&&c!==!1&&(c=G(b,d,na));d===o&&H(b);d===k&&(p?b.touches.length==0&&H(b):H(b));return c}function G(b,
d,e){var i=void 0;if(e==za){c.trigger("swipeStatus",[d,n||null,m||0,j||0,h,f]);if(a.swipeStatus&&(i=a.swipeStatus.call(c,b,d,n||null,m||0,j||0,h,f),i===!1))return!1;if(d==k&&xa()){c.trigger("swipe",[n,m,j,h,f]);if(a.swipe&&(i=a.swipe.call(c,b,n,m,j,h,f),i===!1))return!1;switch(n){case z:c.trigger("swipeLeft",[n,m,j,h,f]);a.swipeLeft&&(i=a.swipeLeft.call(c,b,n,m,j,h,f));break;case D:c.trigger("swipeRight",[n,m,j,h,f]);a.swipeRight&&(i=a.swipeRight.call(c,b,n,m,j,h,f));break;case F:c.trigger("swipeUp",
[n,m,j,h,f]);a.swipeUp&&(i=a.swipeUp.call(c,b,n,m,j,h,f));break;case E:c.trigger("swipeDown",[n,m,j,h,f]),a.swipeDown&&(i=a.swipeDown.call(c,b,n,m,j,h,f))}}}if(e==Ba){c.trigger("pinchStatus",[d,u||null,v||0,j||0,h,r,f]);if(a.pinchStatus&&(i=a.pinchStatus.call(c,b,d,u||null,v||0,j||0,h,r,f),i===!1))return!1;if(d==k&&Aa())switch(u){case ga:c.trigger("pinchIn",[u||null,v||0,j||0,h,r,f]);a.pinchIn&&(i=a.pinchIn.call(c,b,u||null,v||0,j||0,h,r,f));break;case fa:c.trigger("pinchOut",[u||null,v||0,j||0,h,
r,f]),a.pinchOut&&(i=a.pinchOut.call(c,b,u||null,v||0,j||0,h,r,f))}}if(e==na){if(d===o||d===k)clearTimeout(V),clearTimeout(da),a.doubleTap&&!Ca()?(q=y(),V=setTimeout(l.proxy(function(){q=null;c.trigger("tap",[b.target]);a.tap&&(i=a.tap.call(c,b,b.target))},this),a.doubleTapThreshold)):(q=null,c.trigger("tap",[b.target]),a.tap&&(i=a.tap.call(c,b,b.target)))}else if(e==Da){if(d===o||d===k)clearTimeout(V),q=null,c.trigger("doubletap",[b.target]),a.doubleTap&&(i=a.doubleTap.call(c,b,b.target))}else if(e==
Ea&&(d===o||d===k))clearTimeout(V),q=null,c.trigger("longtap",[b.target]),a.longTap&&(i=a.longTap.call(c,b,b.target));return i}function ma(){var b=!0;a.threshold!==null&&(b=m>=a.threshold);return b}function la(){var b=!1;a.cancelThreshold!==null&&n!==null&&(b=va(n)-m>=a.cancelThreshold);return b}function Aa(){var b=f[0].end.x!==0,d=a.pinchThreshold!==null?v>=a.pinchThreshold:!0;return(h===a.fingers||a.fingers===L||!p)&&b&&d}function M(){return!(!a.pinchStatus&&!a.pinchIn&&!a.pinchOut)}function xa(){var b=
a.maxTimeThreshold?j>=a.maxTimeThreshold?!1:!0:!0,d=ma(),c=h===a.fingers||a.fingers===L||!p,e=f[0].end.x!==0;return!la()&&e&&c&&d&&b}function ya(){return!(!a.swipe&&!a.swipeStatus&&!a.swipeLeft&&!a.swipeRight&&!a.swipeUp&&!a.swipeDown)}function Ca(){if(q==null)return!1;var b=y();return!!a.doubleTap&&b-q<=a.doubleTapThreshold}function sa(){var b=!1;K&&y()-K<=a.fingerReleaseThreshold&&(b=!0);return b}function S(b){b===!0?(c.bind(pa,ea),c.bind(qa,ka),I&&c.bind(I,oa)):(c.unbind(pa,ea,!1),c.unbind(qa,
ka,!1),I&&c.unbind(I,oa,!1));c.data(A+"_intouch",b===!0)}function ba(b,a){f[b].identifier=a.identifier!==void 0?a.identifier:0;f[b].start.x=f[b].end.x=a.pageX||a.clientX;f[b].start.y=f[b].end.y=a.pageY||a.clientY;return f[b]}function ta(b){var a;a:{for(a=0;a<f.length;a++)if(f[a].identifier==(b.identifier!==void 0?b.identifier:0)){a=f[a];break a}a=void 0}a.end.x=b.pageX||b.clientX;a.end.y=b.pageY||b.clientY;return a}function Z(){for(var a=[],c=0;c<=5;c++)a.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});
return a}function va(a){if(P[a])return P[a].distance}function aa(){var a={};a[z]=W(z);a[D]=W(D);a[F]=W(F);a[E]=W(E);return a}function W(a){return{direction:a,distance:0}}function ca(a,c){var e=Math.abs(a.x-c.x),f=Math.abs(a.y-c.y);return Math.round(Math.sqrt(e*e+f*f))}function y(){return(new Date).getTime()}var X=p||O||!a.fallbackToMouseEvents,T=X?O?Y?"MSPointerDown":"pointerdown":"touchstart":"mousedown",pa=X?O?Y?"MSPointerMove":"pointermove":"touchmove":"mousemove",qa=X?O?Y?"MSPointerUp":"pointerup":
"touchend":"mouseup",I=X?null:"mouseleave",U=O?Y?"MSPointerCancel":"pointercancel":"touchcancel",m=0,n=null,j=0,x=0,w=0,r=1,v=0717224408,u=0,P=null,c=l(e),g="start",h=0,f=null,R=0,N=0,K=0,Q=0,q=0,V=null,da=null;try{c.bind(T,B),c.bind(U,H)}catch(Ga){l.error("events not supported "+T+","+U+" on jQuery.swipe")}this.enable=function(){c.bind(T,B);c.bind(U,H);return c};this.disable=function(){wa();return c};this.destroy=function(){wa();c.data(A,null);return c};this.option=function(b,c){if(a[b]!==void 0)if(c===void 0)return a[b];
else a[b]=c;else l.error("Option "+b+" does not exist on jQuery.swipe.options");return null}}var z="left",D="right",F="up",E="down",ga="in",fa="out",$="none",ua="auto",za="swipe",Ba="pinch",na="tap",Da="doubletap",Ea="longtap",ha="horizontal",ia="vertical",L="all",Fa=10,ra="start",C="move",k="end",o="cancel",p="ontouchstart"in window,Y=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,O=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,A="TouchSwipe";l.fn.swipe=
function(e){var a=l(this),k=a.data(A);if(k&&typeof e==="string")if(k[e])return k[e].apply(this,Array.prototype.slice.call(arguments,1));else l.error("Method "+e+" does not exist on jQuery.swipe");else if(!k&&(typeof e==="object"||!e))return Z.apply(this,arguments);return a};l.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,
swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe"};l.fn.swipe.phases={PHASE_START:ra,PHASE_MOVE:C,PHASE_END:k,PHASE_CANCEL:o};l.fn.swipe.directions={LEFT:z,RIGHT:D,UP:F,DOWN:E,IN:ga,OUT:fa};l.fn.swipe.pageScroll={NONE:$,HORIZONTAL:ha,VERTICAL:ia,AUTO:ua};
l.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:L}});
