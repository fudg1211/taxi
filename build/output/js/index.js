define(["./global/global","./data/data"],function(p,o){var d,k=!0,j=!1;new (FishMVC.View.extend({init:function(){this.doJiantou();this.initPartx();this.initTouch();this.initPart03()},initTouch:function(){var a=0,b=0,c=0,e=$("body").height(),d=!1,n=!1,f,i,h,g;$("body").on("touchstart",function(m){$("body").unbind("touchend").unbind("touchmove");if(!k)return!1;f=n=d=j=!1;a=m.originalEvent.pageY;b=m.originalEvent.pageX;g=$("#currentShow");g.hasClass("J_touch")&&(i=g.next(),i.css("z-index",10),d=!0);
if((h=g.prev())&&h.length&&h.hasClass("page"))n=!0,h.css("z-index",10);m.preventDefault();$(this).on("touchend",function(b){setTimeout(function(){k=!0},500);Math.abs(c-a)<200&&f?(f==="down"&&h&&h.animate({top:"-100%"},"fast"),f==="up"&&i&&i.animate({top:"100%"},"fast")):(j&&f&&g.css("z-index",0).removeAttr("id"),j&&f=="up"&&i.attr("id","currentShow").animate({top:0},"fast",function(){g.hide();i.css("z-index",0);k=!0;j=!1}),j&&f=="down"&&h.attr("id","currentShow").animate({top:0},"fast",function(){g.hide();
h.css("z-index",0);k=!0;j=!1}),b.preventDefault(),$("body").unbind("touchend"))});$(this).on("touchmove",function(g){c=g.originalEvent.pageY;var l=c-a,m=g.originalEvent.pageX-b;Math.abs(l)>50&&Math.abs(l)>Math.abs(m)&&(f||(l<0&&d&&(f="up",i.css("z-index",10)),l>0&&n&&(f="down",h.css("z-index",10))),f==="up"&&i.show().css("top",e+l),f==="down"&&h.show().css("top",-e+l),j=!0,k=!1);g.preventDefault()})})},elements:{".J_nextPage":"nextPage",".J_part02_position":"part02Position","#part02Zhizheng":"part02Zhizheng",
"#part03Next":"part03Next","#part03Car":"part03Car",".part03-cart .img":"cartImg",".part03-desc .img":"cartImgDesc",".touchslider-item img":"touchsliderItemImg",".part03Prev img":"part03Prev",".part03Next img":"part03Next",".partJiantou":"partJiantou",".part16-phone .part02-button":"part16PhoneButton",".part16-car img":"part16Car",".part16-people img":"part16People","#J_part02_position":"J_part02_position_rel",".touchslider-nav-item-current":"touchslider-nav-item-current_rel","#part15Left":"part15Left",
"#part15Right":"part15Right","#part15FeijiLeft":"part15FeijiLeft","#part15FeijiRight":"part15FeijiRight",".part15-feiji":"part15Feiji"},events:{"click nextPage":"doNextPage","touchtart nextPage":"doNextPageA","click part02Position":"doPart02Position","click part03Next":"doPart03Next","click part16PhoneButton":"doPart16PhoneButton","click part15Left":"doPart15Left","click part15Right":"doPart15Right"},doNextPage:function(a,b){b.stopPropagation();var c=a.parents(".page"),e=c.next();e&&e.length&&e.hasClass("partx")&&
this.initPartx();e&&e.length&&e[0].nodeName.toLocaleLowerCase()!=="script"&&(c.prev().hide(),c.hide(),$("#currentShow").removeAttr("id"),e.show().attr("id","currentShow"));k=!0},doNextPageA:function(a,b){b.stopPropagation()},doPart02Position:function(a){var b=a.data("xy"),c=this,e="translate("+b[0]+"px,"+b[1]+"px)";this.J_part02_position_rel().removeAttr("id");a.attr("id","J_part02_position");this.part02Zhizheng.css({opacity:1,"-webkit-animation":"none"});setTimeout(function(){c.part02Zhizheng.css("-webkit-transform",
e)},100)},doPart03Next:function(){var a=this.part03Car.next();if(a.attr("class")!=="img")return!1;this.part03Car.hide().removeAttr("id");a.show().attr("id","part03Car")},initPart03:function(){this.touchsliderItemImg.show();$(".touchslider").touchSlider({});this.doPart03Jiantou()},initPartx:function(){var a=this.J_part02_position_rel().attr("title")||"\u4e1c\u76f4\u95e8",b=this["touchslider-nav-item-current_rel"]().attr("title")||"\u7279\u62c9\u65af",a=o.getPrice(a,b),a=(new EJS({element:"parxTpl"})).render({data:a});
$("#partx-phone").html(a)},doPart03Jiantou:function(){var a=this,b=0;setInterval(function(){a.part03Prev.css("opacity",0.5);a.part03Next.css("opacity",0.5);a.part03Prev.eq(b).css("opacity",1);a.part03Next.eq(b).css("opacity",1);b++;b>2&&(b=0)},300)},doJiantou:function(){var a=this,b=0,c;setInterval(function(){a.partJiantou.each(function(a,d){c=$(d).children("img");c.css("opacity",0.5);c.eq(b).css("opacity",1)});b++;b>2&&(b=0)},300)},doPart16PhoneButton:function(a){var b=a.data("temp"),c=this,b=b.split(",");
if(c.part16Car.hasClass(b[0]))return!1;clearTimeout(d);c.part16People.fadeIn("fast");c.part16Car.css("-webkit-transition","-webkit-transform 0s ease-out");c.part16Car.removeClass();d=setTimeout(function(){c.part16Car.css("-webkit-transition","-webkit-transform "+b[1]+"s ease-out")},200);d=setTimeout(function(){c.part16Car[0].className=b[0];d=setTimeout(function(){c.part16People.eq(b[2]).fadeOut("slow");c.part16Car.css("-webkit-transition","-webkit-transform "+3/Number(b[1])+"s ease-in");d=setTimeout(function(){c.part16Car[0].className=
"part16-car-end";d=setTimeout(function(){c.part16People.eq(b[2]).fadeIn("fast");c.part16Car.removeClass().removeAttr("style")},3/Number(b[1])*1E3)},500)},Number(b[1])*1E3)},400)},doPart15Left:function(){var a=this;this.part15Feiji.css("opacity",0);this.part15FeijiLeft.css("-webkit-transition","-webkit-transform 0s linear");this.part15FeijiLeft.css("-webkit-transform","translate(-100px,0)");setTimeout(function(){a.part15FeijiLeft.css("opacity",1);a.part15FeijiLeft.css("-webkit-transition","-webkit-transform 2s linear");
a.part15FeijiLeft.css("-webkit-transform","translate(1160px,0)")},200)},doPart15Right:function(){var a=this;this.part15Feiji.css("opacity",0);this.part15FeijiRight.css("-webkit-transition","-webkit-transform 0s linear");this.part15FeijiRight.css("-webkit-transform","translate(100px,0)");setTimeout(function(){a.part15FeijiRight.css("opacity",1);a.part15FeijiRight.css("-webkit-transition","-webkit-transform 2s linear");a.part15FeijiRight.css("-webkit-transform","translate(-1160px,0)")},200)}}))({el:$(".wrapper")})});
